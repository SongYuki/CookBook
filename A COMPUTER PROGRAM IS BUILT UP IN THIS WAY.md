# A COMPUTER PROGRAM IS BUILT UP IN THIS WAY

标签： COOKBOOK

---

编写程序的能力并不是在他人的程序上添砖加瓦，拼凑整合，而是在自己的脑中酝酿，继而编写出完整的程序。

在程序界能够成为老师，写下著作的人，当然对程序都非常精通。然而精通的人往往无法理解不懂的人，往往会觉得他们学不会是因为不够努力，而不是自己教的不好。

每个人的人生道路都不尽相同，栽跟头的地方也不一样，有时可能会在不起眼的地方卡住。但如果跨越了这道障碍，说不定就能不断取得进步。如果在那些一般人都没问题的地方栽跟头，然后克服了的话，反而更有利于之后的成长。

**从始至终只编写一个程序**
在介绍新的工具之前，首先让读者了解为什么使用它。这一想法同样也有问题。**要想体会到一件事物的必要性，需要了解没有它时的窘境才行。**所以，在走投无路的时候介绍需要的工具比成为在大雄还没有发愁前就拿出道具的哆啦A梦更有助于理解。
基于这一原则，我们会花费较多的时间。

开发商业软件的规模：虽然是多人协作完成的，但每个人至少也要写数万行。

**像范例程序这样只有180行的程序，一流程序员只需要两个钟头就可以完成。我不是一流程序员，所以花费了大概半天的时间。如果两天还写不出来的话，在专业程序员中就属于水平很低的了。**

程序语言的规则，数量不会多到记不住，需要一个一个来学习，只记住字面上的规则没有任何作用。

虽然语法和词汇的使用方法不得不记，但仅仅记住这些是无法写出文章的。即使记住编程语言的语法，也不能证明你能写出程序来。**记住编程语言和记住编程方法不是一回事**

首先学会一些基础的单词和语法，然后不断地应用练习。就好似从 I have a  pen.这种程度开始学习一般。

**在你渐渐熟悉，并希望表达更多内容的时候，就需要学习更多的词汇和语法，然后再进行熟悉。不断重复这一循环。知道的单词比较有限的时候，有时需要使用已知的单词勉强表达。虽然痛苦，但是在所难免**

总结：
+ 用某种编程语言编写程序需要遵循什么规则，这种程序的运行方法
+ **程序是依据某种规则写就的“奇妙文章”**
+ **想要达成目的，首先要思考从何处着手**。无论多么大的目标，都有其第一步。如果不从实际着手，就无法开始。而且，关于第一步应该做什么，需要自己来思考。


**存储区**
不建议将存储区类比为箱子或者笔记本中的格子。因为箱子和格子可以是空的，但空存储区是不存在的。存储区中肯定有数字。一般人喜欢将修改存储区的内容称为“写入”，仿佛格子一样。但大家会误认为能写入就能擦除。因此，避免使用“写入”这一词汇。

现在的计算机中，存储区有10亿个以上。常用吉字节（Gigabyte,GB）来表示。1GB=10亿。4GB内存的计算机中就有40亿个这样的存储区。

program:记载着执行顺序的东西

根本性的问题：**程序就是告诉计算机“按什么顺序让哪个存储区记住哪个数字”的东西，它所能做的只有操纵存储区罢了**。

无论是演奏音乐，网络通信还是进行绘画，归根结底都是操纵存储区。所有的计算机都是这样。
**成为开关的存储区**
网络或音乐同理，某部分的存储区就相当于网络通讯装置或者音乐器材的开关，类似于“如果将100号改为5，就向网络的另一边发送5的感觉”。计算机上的诸多功能，都是通过用程序修改存储区的方法来实现的。**“驱动程序”就是“操纵相连设备的程序”的意思**

**画面是什么**
与存储区相连接的就是组成画面的一个个像素。我们通过操纵与像素相连的存储区来绘制图片。近年来，有些游戏画面做得如同电影一般，但究其本质，也同样是通过修改与像素相连的存储区的数值来实现的。

+ 程序是按照**“以什么顺序”“向哪个存储区”“保存哪个数字”**来写下东西
+ 计算机是依照程序中的内容**操纵存储区**，让外部设备得以运转的设备
+ 画面由像素组成，**绘制画面就是对众多像素的颜色进行修改**
+ 程序中的编号由0开始
+ 无论多么易懂，一旦量太大就不简单了，反而非常困难
+ 在**“易懂但量大”和“复杂却量少”**之间挣扎，这就是编程的本质

程序写得太长是程序员的罪过

数学中的变量，完全可以用存储区来实现
设置边界值，更利于传达意图：小于3就可以的情况下选择3，大于10就可以的情况下选择10

hierarchy : 等级制度

metrics : 指标

hashing & pseudo-associativity

skewed associative caches

想要轻松，还是要用脑子。但是不是使用疲惫的大脑而是避免大脑变得疲惫

想要写出符合预期的内容，需要思考三点
+ 试着运行一下，找到理想和现实的差异
+ 思考为什么会得到这样的现实
+ 思考怎样才能让理想与现实达成一致

人在第一次尝试的时候一般都会失败，无论进行多么周全的准备也难以避免失败的结局。所以提前做好失败的准备，然后尽早失败也并非难事。因为这样才能迅速找出问题，并进行改正。**人类毕竟是愚蠢的生物，即便为了避免失败而小心翼翼，不尝试的话仍然难免失败。**

除了循环以外，能重复使用同一行的方法——**引用**

被引用的程序称为局部程序。在其他编程语言中，存在“函数”function,方法method,过程procedure,子例程subroutine等叫法。

**“先树立目标，再考虑手段”**是编程时的基本思想。大部分情况下也都是先确定菜单，在考虑菜的做法。这就是将进行引用的部分写在上方，局部程序写在下方的原因。

局部程序并非完全没有弊端。对于计算机而言，不能直接移动到下一行时会增加工作量，所以会浪费很多的时间。但是，这是成为专业程序员后需要考虑的问题。

局部程序是编写大型程序时的利器。因此，请务必学会熟练使用。
 
**让方块下落**
Tips：建议你创建一个新的文件进行编写。如果一直使用同一个文件，就看不到修改前的内容了。

Q：如何避免局部程序的外部和内部使用了同一个存储区？
A：比如定下“局部程序内部只使用100号以上的存储区”这样的规则。然而，当你需要在局部程序中引用局部程序时，问题就出现了。完美的解决方案，其关键词就是“栈”。

Q：程序究竟能做什么？
A：只能修改保存在存储区中的数字。至于画面中能够出现点的原因，就在于有些特定的存储区起着开关的作用，由这些开关控制着像素的颜色。与此相同，有一个特定的存储区是负责关闭调控功能的开关。
与像素相连的存储区这种说法其实是不对的，正确的说法应该是将保存在存储区中的颜色，随后传递给显示屏。

以前操纵存储区时，需要等偶尔才来的邮差取走你的信才行。这样太慢了。但如果将55001号改为1，即使修改了存储区，也不会将信寄出。因此虽然看不到画面，但运行速度却很快。将55001号改为1，就相当于“关闭自动寄信功能”一样。

存储区[55000]->1 #信
程序中“将目前存储区的状态记录于信纸上，然后传递给显示屏”这个动作就相当于摄影

存储区[55001]->1 #关闭调控功能
因为要涂的像素越来越多，运动越来越重要，所以不得不关闭调控功能。不过，当程序不能按照预想的情况运行时，把调控重新打开也许是个好办法。因为可以看到绘制像素的顺序，所以有助于找出问题所在。

 - 要让图形运动，就等于先将它消除，然后再在其他地方画出来
 - 要消除图形，就等于给它图上和背景相同的颜色
 - 注意不要让局部程序内部和外部使用的存储区编号重复
 - 关闭调控功能的方法和调控功能的原理**寄信速度之慢**

**为存储区起名**
 - 使用命名存储区后程序变得易读又易写
 - 使用命名存储区后不需要考虑存储区编号的分配，利于减少错误
 - 使用命名存储区后对注释的依赖减少

**操作方块**
循环，局部程序，命名存储区——在掌握了这“三大必备功能”后，无论从哪里开始，难度都是一样的。

“如果进行了操作，应该做出某种响应”——这是我们的目标。

程序只能操纵存储区，所以存储区是唯一的选项。
计算机是由“运行程序的装置”和“大量的内存”这两者组成的。**内存这个词，既可以指代硬件（内存储器），也可以指代软件（存储区）**。只有需要知道某个存储区中的数值时，才需要“查看”。

**因为装置会操纵某个地方的存储区，所以只要程序查看一下这个存储区，就可以知道外部发生了什么。这就是计算机程序获取计算机外部信息的途径。将它当作寄信来理解就好了。**

不仅限于键盘，鼠标和触摸屏也是同样的原理。即使是麦克风，也同样是将声音通过某种途径变换为数字，然后存入存储区的，摄像头也一样，将图形通过某种途径转换为数字，然后存入存储区。**信息通过网络传递时也是一样的原理。某个地方的存储区会“自己变化”。可以想象为刻度盘在自己转动。**

外部装置可以操纵多个存储区，眼前需要知道的就是在“那个游戏”中要使用的存储区。
 
无论是运行5分钟后，还是1小时后，程序都需要对按键做出响应。也就是说，能够响应键盘操作的程序必须是一直保持运行的程序。**一直保持运行的程序肯定包含有重复无限次的循环。**

存在延迟的程序。如果循环速度不够快，按下按键后就无法立刻响应。程序必须做到在1/30秒之内响应，最差也需控制在1/15秒之内。

需要注意的是，键盘可以响应的按键个数是有限的。如果同时按上下左右四个键，可能一下子无法全部响应，以致点发生运动。

**避免过快的移动**
虽然我们不想成为只知道数字的人类，但是为了和只知道数字的东西交流，务必需要掌握用数字进行说明的技巧。

如何取得“所花费的功夫”和“程序易读性”之间的平衡是你的自由，但就个人经验而言，宁愿多花费一些时间让代码更易懂。因为在大多数情况下，比起编写时所花费的时间，修改错误以及进行维护时所花费的时间更长。

 - 从计算机外部获取信息时还是使用存储区
 - 判断上下左右键是否被按下的方法
 - 可以进行操作的程序是不会终止的程序，因此需要无限次循环
 - 在一般人看来很简单的逻辑，要让计算机明白的话，需要进行相当程度的转换才行
 - 想得到需要的结果，就需要“创造”出算式
 - 如何得知“刚刚按下”
 
**到头来一切都是存储区**。操纵外部装置需要使用存储区，使用外部装置进行操作时还是要用存储区。“按下某个按键时某个存储区的数值是什么”。

**“创造”算式是非常重要的思考方式**。将代入的数字替换为操作，得到的数字替换为图形，算式替换为程序，就会变成“想要生成一个针对某一操作得到所需图形的程序”。这正是编写游戏程序的精髓。程序就像是一个巨大的算式，“创造”它就是编程本身。

“计算”本来的意思
